<!--
 * @Author: vuvivian
 * @Description: è¯·è¾“å…¥....
 * @Date: 2024-05-22 22:21:46
 * @LastEditors: Do not edit
 * @LastEditTime: 2024-08-27 23:50:13
 * @FilePath: /wifi-clock/index.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶å…‰èè‹’-WIFIæ—¶é’Ÿè®¾ç½®</title>
    <style>
        html, body, div, span, applet, object, iframe,
        h1,  h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed, 
        figure, figcaption, footer, header, hgroup, 
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
            /* font-family: 'PT Serif', serif; */
        }
        .container {
          background-color: #f4f6fb;
          height: calc(100vh);
          overflow: auto;
          
        }
        .header {
            /* #7887ff */
            background-color: #5d7cfa;
            height: 15rem;
            border-radius: 0% 0% 8% 8%;
            padding: 1rem 0.4rem 2rem 0.4rem;
        }
        .title {
            color: #fbfcff;
            /* display: flex;
            align-items: center; */
            /* justify-content: center; */
            text-align: center;
           
        }
        .nav {
            display: flex;
            justify-content: center;
            padding: 1rem 0;
        }
        .tab {
            background-color: #7893ff;
            color: #FFFFFF;
            height: 3rem;
            width: 5rem;
            line-height: 3rem;
            padding: 0% 1rem;
            border-radius: 2rem;
            text-align: center;
            margin-right: 1rem;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .tab-active {
            background-color: #f3f3f3;
            color: #3f64fb;
            font-weight: bolder;
        }
        .content {
            width: 92%;
            margin-left: 4%;
            margin-top: -5rem;
            border-radius: 1rem;
            /* height: calc(100vh - 16rem); */
            background-color: #FFFFFF;
            /* overflow: auto; */
            box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
            /* box-shadow: rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px; */
        }
        .content-show {
            display: block !important;
        }
        .content-hide {
            display: none !important;
        }
        .content-block {
            display: none;
            text-align: center;
            padding: 1rem;
            width: auto;
        }
        .form {
            width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }
        .form-item {
            padding: 0.6rem 0.8rem;
            border-radius: 1rem;
            text-align: left;
            /* box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px; */
            /* box-shadow: rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px; */
            /* box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px; */
            

        }
        .form-item-label{
            display: inline-block;
            color: #68696d;
            font-size: 0.8rem;
            font-weight: 700;
            transition: all 0.2s;
            margin-bottom: 0.6rem;
        }
        .form-item-input, .form-item-select {
            position: relative;
            display: inline-block;
            width: 100%;
            min-width: 50;
            border-radius: 6px;
            background: #FFFFFF;
            padding: 0.2rem;
            color: #2f3140;
            font-size: 0.8rem;
            font-weight: 700;
            line-height: 2.2rem;
            box-sizing: border-box;
            border: 1px solid #7893ff;
            list-style: none;
            transition: all 0.2s;
        }
        .form-item-range {
            width: 100%;
            background: #c7d0f4;
            overflow: hidden;
            /* outline: none; */
            /* -webkit-appearance: none; æ¸…é™¤ç³»ç»Ÿé»˜è®¤æ ·å¼ */
            /* height: 3px; æ¨ªæ¡çš„é«˜åº¦ */
        }
      
        .form-item-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .form-item-select {
            height: 2.7rem;
            line-height: 2.7rem;
        }
        .form-item-radio {
            margin: 0 1rem 0 0rem ;
            color: #2f3140;
            font-weight: 700;
            font-size: 0.8rem;
        }
        .refresh-btn {
            width: 3rem;
            height: 2.5rem;
            font-size: small;
            line-height: 2.5rem;
            color: #000;
            text-align: center;
            margin-left: 0.4rem;
            /* border: #5d7cfa 1px solid; */
            background-color: #f3f6fc;
            border-radius: 22%;
        }
        .toogle-ssid-btn {
            width: 5rem;
            height: 2.5rem;
            font-size: 0.8rem;
            line-height: 2.5rem;
            color: #fff;
            text-align: center;
            margin-left: 0.4rem;
            background-color: #7893ff;
            border-radius: 10%;
        }
        .form-button {
           padding: 1rem 0;
           display: flex;
           justify-content: space-around;
           align-items: center;
           
        }
        .reset-button {
            width: 46%;
            height: 3.4rem;
            border: none;
            background-color: #fff;
            font-size: 1.2rem;
            color: #2f3140;
            border: 1px solid #c7d0f4;
            border-radius: 1rem;
            letter-spacing: 0.6rem;
        }
        .save-button {
            width: 46%;
            height: 3.4rem;
            border: none;
            background-color: #5d7cfa;
            font-size: 1.2rem;
            color: #FFFFFF;
            border-radius: 1rem;
            letter-spacing: 0.6rem;
        }
        .autoLocalTime {
            padding: 0rem 0.8rem;
            color: #2f3140;
        }
        input:disabled {
            cursor: default;
            background-color: light-dark(rgba(239, 239, 239, 0.3), rgba(59, 59, 59, 0.3));
            color: light-dark(rgb(84, 84, 84), rgb(170, 170, 170));
            border-color: rgba(118, 118, 118, 0.3);
        }
        
        input[type="checkbox"].form-item-checkbox-normal {
            margin: 0em 0.2rem 0 0;
            padding: 0;
            width: 1.2em;
            height: 1.2em;
            border: 1px solid #ccc;
            font-size: 0.9em;
            display: inline-block;
            vertical-align: middle;
        }
        input[type="radio"], input[type="checkbox"].form-item-checkbox{
            -webkit-appearance: none;
            -moz-appearance: none;
            position: relative;
            display: inline-block;
            vertical-align: middle;
            margin: 0em 0.2rem 0 0;
            padding: 0;
            width: 1.6em;
            height: 1.6em;
            border: 1px solid #ccc;
            font-size: 0.9em;
            cursor: pointer;
            outline: none;
            transition: all .2s ease;
        }
        input[type="radio"] {
            border-radius: 50%;
        }
  
        input[type="radio"]:after {
            content: '';
            display: inline-block;
            position: absolute;
            left: 50%;
            top: 50%;
            background: #7893ff;
            border-radius: 50%;
            width: 0;
            height: 0;
            opacity: 0;
            transform: translate(-50%, -50%);
            transition: all .2s ease;
            transform-origin: center center;
            pointer-events: none;
        }
        
        input[type="radio"]:checked:after {
            width: 1em;
            height: 1em;
            opacity: 1;
        }

        input[type="checkbox"] {
            border-radius: .2em;
        }
  
        input[type="checkbox"].form-item-checkbox:after {
            content: '\2714';
            display: inline-block;
            position: absolute;
            left: 50%;
            top: 50%;
            color: #7893ff;
            font-size: 2.5em;
            font-family: meiryo, "sans-serif";
            opacity: 0;
            transition: all .1s ease;
            transform: translate(-50%, -50%) scale3d(.2, .2, 1);
            transform-origin: center center;
        }
  
        input[type="checkbox"].form-item-checkbox:checked:after {
            opacity: 1;
            transform: translate(-50%, -50%) scale3d(1.2, 1.2, 1);
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 2rem;
            border-radius: 0.5rem;
            border: 0;
            cursor: pointer;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 2rem;
            height: 2rem;
            border-radius: 59%;
            border: 0px solid transparent;
            border-image: linear-gradient(#7893ff,#7893ff) 0 fill / 8 20 8 0 / 0 0 0 99vw;
        }

        input[type="datetime-local"] {
            width: 100%;
            color: #2f3140;
            font-size: 0.8rem;
        }

        .form-item-block {
            background-color: #f4f6fb;
            margin: 0.5rem 0 ;
            padding: 0.6rem 0.8rem;
            border-radius: 0.4rem;
            text-align: left;
            box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;
            /* box-shadow: rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px, rgba(17, 17, 26, 0.1) 0px 24px 80px; */
            /* box-shadow: rgba(0, 0, 0, 0.17) 0px -23px 25px 0px inset, rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset, rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px; */
            
        }

        .form-item-block .form-item-group .form-item-label {
            margin-bottom: 0;
        }

        .form-item-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0.8rem;
            margin: 0.6rem 0 ;
            background-color: #eaecf6;
            border-radius: 0.4rem;
            box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;
        }

        .form-item-row .form-item-label {
            margin-bottom: 0;
            margin-right: 1rem;
        }

        .form-item-time {
            flex: 1;
            line-height: 2rem;
        }

        .form-item-description {
            text-align: left;
            color: #68696d;
            font-size: 0.8rem;
            padding: 0.2rem 0 0 0;
        }

        .wifi-refresh {
            color: #3f64fb;
        }

        .form-item-inner {
            display: none;
        }

        .form-item-inner-label {
            font-weight: 400;
        }

        .light-value {
            color: #7893ff;
            font-size: 1.2rem;
        }
        input[type="time"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            cursor:pointer;
            display: block;
            width:100%;
            color: red;
            text-align:center;
            position:relative;
        }

        .footer {
            height: 2rem;
            line-height: 2rem;
            text-align: center;
            color: #a6a9ae;
        }

        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* ç¡®ä¿å®ƒä½äºé¡µé¢é¡¶éƒ¨ */
        }

        .loading-icon {
            border: 6px solid rgba(0, 0, 0, 0.1);
            border-top-color: #5d7cfa;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">
                <h2>WiFiæ™ºèƒ½æˆæ—¶<br />ç”µå­æ—¶é’Ÿ</h2>
            </div>
            <div class="nav">
                <div id="wifi-tab"  class="tab tab-active" onclick="toogleTab('wifi')">Wi-Fiæˆæ—¶</div>
                <div id="clock-tab"  class="tab" onclick="toogleTab('clock')">æ‰‹åŠ¨æˆæ—¶</div>
                <div id="system-tab" class="tab "  onclick="toogleTab('system')">ç³»ç»Ÿè®¾ç½®</div>
            </div>
        </div>
        <div class="content">
            <div id="wifi-content" class="content-block content-show">
                <form class="form">
                    <div class="form-item">
                        <label class="form-item-label">Wi-Fiåç§°</label>
                        <div class="form-item-group ssid-select">
                            <select class="form-item-select" id="ssid">
                            </select>
                            <div class="toogle-ssid-btn" onclick="toogleSsid('input')">æ‰‹è¾“æ¨¡å¼</div>
                       </div>
                       <div class="form-item-group ssid-input content-hide">
                            <input class="form-item-input" id="ssid" type="text" placeholder=""/>
                            <div class="toogle-ssid-btn" onclick="toogleSsid('select')">é€‰æ‹©æ¨¡å¼</div>
                        </div>
                        <p class="form-item-description wifi-refresh" onclick="getWifiList()">
                            ğŸ‘†ç‚¹æ­¤å¯é‡æ–°è·å–æ‚¨å‘¨å›´çš„wifiåç§°åˆ—è¡¨å“¦ã€‚
                        </p>
                        <p class="form-item-description">
                            âœï¸å¦‚æœæ²¡æœ‰æœç´¢åˆ°æ‚¨è¦çš„Wi-Fiåç§°ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥ã€‚
                        </p>
                    </div>
                    <div class="form-item">
                        <label class="form-item-label">Wi-Fiå¯†ç </label>
                        <input class="form-item-input" type="text" placeholder=""  id="pwd"/>
                    </div>
                    <div class="form-item">
                        <label class="form-item-label">æ—¶é’Ÿæ˜¾ç¤º</label>
                        <div class="form-item-group">
                            <div class="form-item-radio">
                                <input type="radio" name="is24" id="is12" value="is12"/>
                                <label for="is12">12å°æ—¶åˆ¶</label>
                            </div>
                            <div class="form-item-radio">
                                <input type="radio" name="is24" id="is24" value="is24" checked/>
                                <label for="is24">24å°æ—¶åˆ¶</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-item">
                        <label class="form-item-label">æ—¶åŒºé€‰æ‹©</label>
                        <div class="form-item-group">
                            <select class="form-item-select" id="z_zone" style="flex: 1 1 0; margin-right: 0.6rem;" aria-label="æ—¶åŒºé€‰æ‹©">
                                <option value="" selected>ä¸œæ—¶åŒº</option>
                                <option value="-">è¥¿æ—¶åŒº</option>
                            </select>
                            <select class="form-item-select" id="z_time" style="flex: 1 1 0; margin-right: 0.6rem;" aria-label="æ—¶å·®">
                                <option value="0">0åŒº</option>
                                <option value="1">1åŒº</option>
                                <option value="2">2åŒº</option>
                                <option value="3">3åŒº</option>
                                <option value="4">4åŒº</option>
                                <option value="5">5åŒº</option>
                                <option value="6">6åŒº</option>
                                <option value="7">7åŒº</option>
                                <option value="8" selected>8åŒº</option>
                                <option value="9">9åŒº</option>
                                <option value="10">10åŒº</option>
                                <option value="11">11åŒº</option>
                            </select>
                        </div>
                        <p class="form-item-description">
                           ä½¿ç”¨åŒ—äº¬æ—¶é—´è¯·é€‰æ‹©ä¸œæ—¶åŒº-8åŒºã€‚
                        </p>
                    </div>
                    <div class="form-button">
                        <button class="reset-button" onclick="handleReset('wifi')">é‡ç½®</button>
                        <button class="save-button" type="button" onclick="handleSubmit('wifi')">ä¿å­˜</button>
                    </div>
                </form>
            </div>
            <div id="clock-content" class="content-block">
                <form class="form">
                    <div class="form-item">
                        <label class="form-item-label">æ‰‹åŠ¨è®¾ç½®æ—¶é—´</label>
                        <input type="datetime-local" class="form-item-input" id="localTime" value="2023-04-01T20:00" placeholder="è¯·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´" />
                        <!-- <input class="form-item-input" id="localTime" value="20:00" type="datetime" placeholder="" /> -->
                    </div>
                    <div class="form-item autoLocalTime">
                        <input type="checkbox" class="form-item-checkbox-normal" id="form-item-local-time" onchange="getLocalTime(event)" />
                        <label for="form-item-local-time" class="form-item-label">è·å–æ‰‹æœºå½“å‰æ—¶é—´</label>
                    </div>
                    <p class="form-item-description">
                        æ³¨æ„ï¼šè¯¥æ¨¡å¼ä¸‹æ—¶é’Ÿæ–­ç”µä¸èµ°æ—¶ï¼Œé‡æ–°ä¸Šç”µæ—¶é—´å½’é›¶ã€‚
                    </p>
                    <div class="form-button">
                        <button class="reset-button" onclick="handleReset('clock')">é‡ç½®</button>
                        <button class="save-button" onclick="handleSubmit('clock')">ä¿å­˜</button>
                    </div>
                </form>
            </div>
            <div id="system-content" class="content-block">
                <form class="form">
                    <div class="form-item-block">
                        <div class="form-item-group">
                            <label class="form-item-label">äº®åº¦è®¾ç½®</label>
                            <span class="light-value">4/8</span>
                        </div>
                        <input class="form-item-range" type="range" min="1" max="8" step="1" value="4"  id="lightLevel" onchange="rangeSlide(value)"/>
                    </div>
                    <div class="form-item-block">
                        <div class="form-item-group">
                            <label class="form-item-label">å±å¹•æ—‹è½¬</label>
                            <input class="form-item-checkbox" type="checkbox" id="isAutoRotateScreen" />
                        </div>
                        <p class="form-item-description">
                            å¼€å¯åæ—¶é’Ÿå±å¹•å°†æ—‹è½¬180åº¦æ˜¾ç¤ºã€‚
                         </p>
                    </div>
                    <div class="form-item-block">
                        <div class="form-item-group">
                            <label class="form-item-label">é¦–ä½æ˜¾ç¤º0</label>
                            <input class="form-item-checkbox" type="checkbox" id="isFixZero" />
                        </div>
                        <p class="form-item-description">
                            å¼€å¯åæ—¶é’Ÿå±å¹•ç¬¬ä¸€ä½ä¸ºç©ºæ—¶æ˜¾ç¤º0ï¼Œæ¯”å¦‚01:00ã€‚
                         </p>
                    </div>
                    <div class="form-item-block">
                        <div class="form-item-group">
                            <label class="form-item-label">äº¤æ›¿æ—¥æœŸä¸æ—¶é—´</label>
                            <input class="form-item-checkbox" type="checkbox" id="isLoopDisplay" />
                        </div>
                        <p class="form-item-description">
                            å¼€å¯åæ—¶é’Ÿå±å¹•å°†è‡ªåŠ¨äº¤æ›¿æ˜¾ç¤ºå½“å‰æ—¥æœŸä¸æ—¶é—´ã€‚
                         </p>
                    </div>
                    <div class="form-item-block">
                        <div class="form-item-group">
                            <label class="form-item-label">è‡ªåŠ¨äº®åº¦</label>
                            <input class="form-item-checkbox" type="checkbox"  id="isAutoLight" onchange="handleAutoLight(event)"/>
                        </div>
                        <p class="form-item-description">
                           å¼€å¯åå°†åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…è‡ªåŠ¨è°ƒèŠ‚è‡³æœ€ä½äº®åº¦ã€‚
                        </p>
                       <div class="form-item-inner">
                            <div class="form-item-row">
                                <label class="form-item-label form-item-inner-label">å¤œé—´å¼€å§‹æ—¶é—´</label>
                                <input class="form-item-input form-item-time" type="time" id="nightRangeBegin" value="20:00" placeholder=""/>
                            </div>
                            <div class="form-item-row">
                                <label class="form-item-label form-item-inner-label">å¤œé—´ç»“æŸæ—¶é—´</label>
                                <input class="form-item-input form-item-time" type="time" id="nightRangeEnd" value="06:00"  placeholder=""/>
                            </div>
                       </div>
                    </div>
                    <div class="form-button">
                        <button class="reset-button" onclick="handleReset('system')">é‡ç½®</button>
                        <button class="save-button" onclick="handleSubmit('system')">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="footer">
            @2024 æ™šé—´ç”µå­ç§‘æŠ€
        </div>
        <div id="loading-container" class="loading-container">
            <div class="loading-icon"></div>
        </div>
    </div>
    <script>
        "use strict";
        
        let defaultData = {};

         // åˆ‡æ¢tab
         function toogleTab(activeType) {
            document.getElementsByClassName('tab-active')[0]?.classList?.remove('tab-active');
            document.getElementById(`${activeType}-tab`)?.classList?.add('tab-active');

            document.getElementsByClassName('content-show')[0]?.classList?.remove('content-show');
            document.getElementById(`${activeType}-content`)?.classList?.add('content-show');

            handleReset(activeType);
         }

         // åˆ‡æ¢wifiåç§°è¾“å…¥æ–¹å¼
         function toogleSsid(type) {
            if (type === 'input') {
                document.getElementsByClassName(`ssid-input`)[0]?.classList?.remove(`content-hide`);
                document.getElementsByClassName(`ssid-select`)[0]?.classList?.add('content-hide');
            } else {
                document.getElementsByClassName(`ssid-select`)[0]?.classList?.remove(`content-hide`);
                document.getElementsByClassName(`ssid-input`)[0]?.classList?.add('content-hide');
            }
           
         }

         // è·å–æ‰‹æœºæœ¬åœ°æ—¶é—´
         function getLocalTime(e) {
            e.target.checked ? (
                document.getElementById("localTime").disabled = true,
                // document.getElementById("localTime").value = (new Date()).toLocaleTimeString('zh', { hour12: false , hour: "2-digit", minute: "2-digit" }) 
                setLocalTime()
            ) : (document.getElementById("localTime").disabled = false)
         }

         function setLocalTime() {
            const localTimeInput = document.getElementById('localTime');
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hour = String(now.getHours()).padStart(2, '0');
            const minute = String(now.getMinutes()).padStart(2, '0');
            // æ³¨æ„ï¼šdatetime-local é€šå¸¸ä¸æ˜¾ç¤ºç§’æ•°ï¼Œä½†å¦‚æœä½ éœ€è¦ï¼Œå¯ä»¥åŠ ä¸Šå®ƒ
            const second = '00'; // è®¾ç½®ä¸º00ï¼Œå› ä¸ºdatetime-localé€šå¸¸ä¸å¤„ç†ç§’

            // æ„é€ æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
            const dateTimeString = `${year}-${month}-${day}T${hour}:${minute}:${second}`;

            // è®¾ç½®è¾“å…¥æ¡†çš„å€¼
            localTimeInput.value = dateTimeString;
        }


         // äº®åº¦è®¾ç½®
         function rangeSlide(value) {
            document.querySelector('.light-value').textContent = `${value}/${8}`;
         }

         // å¯ç”¨è‡ªåŠ¨äº®åº¦
         function handleAutoLight(event) {
            const show = event.target.checked;
            document.querySelector('.form-item-inner').style.display = show ? 'block' : 'none';
         }

         // é‡ç½®æ—¶é’Ÿè®¾ç½®
         function handleReset(activeType) {
            event?.preventDefault();
            event?.stopPropagation();
            if (activeType === 'wifi') {
                if(defaultData.is24) {
                    document.getElementById('is24').checked = true;
                    document.getElementById('is12').checked = false;
                } else {
                    document.getElementById('is12').checked = true;
                    document.getElementById('is24').checked = false;
                }

                if(defaultData?.timeZone) {
                    if(defaultData.timeZone < 0) {
                        document.getElementById("z_zone").value = "-";
                    } else {
                        document.getElementById("z_zone").value = "";
                    }
                    document.getElementById('z_time').value = Math.abs(defaultData.timeZone);
                }

                if(defaultData?.ssidList?.length > 0) {
                    const selectElement = document.getElementById('ssid');
                    selectElement.innerHTML = '';
                    defaultData.ssidList.forEach((ssid) => {
                        const option = document.createElement('option');
                        option.value = ssid.name;
                        option.text = ssid.name;
                        selectElement.appendChild(option);
                    });
                }
            } else if(activeType === 'system') {
                document.getElementById("lightLevel").value = defaultData.lightLevel || 4;
                rangeSlide(defaultData.lightLevel || 4);

                document.getElementById("isAutoRotateScreen").checked = !!defaultData.isAutoRotateScreen;

                document.getElementById("isFixZero").checked = !!defaultData.isFixZero;

                document.getElementById("isLoopDisplay").checked = !!defaultData.isLoopDisplay;

                if(!!defaultData.isAutoLight) {
                    document.getElementById("isAutoLight").checked = !!defaultData.isAutoLight;
                    handleAutoLight({target: {checked: !!defaultData.isAutoLight}});
                    document.getElementById("nightRangeBegin").value = defaultData.nightRangeBegin;
                    document.getElementById("nightRangeEnd").value = defaultData.nightRangeEnd;
                }
            } else {
                document.getElementById("localTime").value = "20:00";
                document.getElementById("localTime").disabled = false;
                document.getElementById("form-item-local-time").checked = false;
            }
        }

         // ä¿å­˜æ—¶é’Ÿè®¾ç½®
         function handleSubmit(activeType) {
            event.preventDefault();
            event.stopPropagation();
            document.getElementById('loading-container').style.display = 'flex';
            let params = {};

            if(activeType === 'wifi') {
                params = {
                    ssid: document.getElementById('ssid')?.value,
                    pwd: document.getElementById('pwd')?.value,
                    is24: document.getElementById('is24')?.checked,
                    timeZone: document.getElementById('z_zone')?.value + document.getElementById('z_time')?.value,
                    isAutoUpdateTime: true,
                }
            } else if(activeType === 'clock'){
                params = {
                    localTime: document.getElementById('localTime')?.value,
                    localTimeZone: (new Date()).getTimezoneOffset(),
                    isAutoUpdateTime: false,
                }
            } else {
                params = {
                    lightLevel: document.getElementById('lightLevel')?.value,
                    isAutoRotateScreen: document.getElementById('isAutoRotateScreen')?.checked,
                    isFixZero: document.getElementById('isFixZero')?.checked,
                    isLoopDisplay: document.getElementById('isLoopDisplay')?.checked,
                    isAutoLight: document.getElementById('isAutoLight')?.checked,
                    nightRangeBegin: document.getElementById('nightRangeBegin')?.value,
                    nightRangeEnd: document.getElementById('nightRangeEnd')?.value,
                }
            }

            const formData = new FormData();

            for (const key in params) {
                if (params.hasOwnProperty(key)) {
                    formData.append(key, params[key]);
                }
            }

            fetch('/saveSystemSetting', {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                if (!response) { 
                    throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                }
                document.getElementById('loading-container').style.display = 'none';
                alert("é…ç½®å·²æäº¤!");
                defaultData = Object.assign({}, defaultData, params);
            })
            .catch(error => {
                document.getElementById('loading-container').style.display = 'none';
                alert("æäº¤è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µå†è¯•ï¼");
            });
         }

         // è·å–æ—¶é’Ÿè®¾ç½®
         function getClockSetting() {
            console.log('getClockSetting');
            fetch('/getClockSetting')
            .then(response => {
                if (!response) { 
                    throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                }
                  return response.json();
            })
            .then(data => {
                defaultData = data;
                handleReset('wifi'); 
            })
            .catch(error => {
                // å¤„ç†é”™è¯¯æƒ…å†µ
                alert("è·å–æ•°æ®è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µå†è¯•ï¼");
            });
         }

         function getWifiList () {
            fetch('/getWifiList') 
            .then(response => {
                if (!response) { 
                    throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                toogleSsid('select');
                const selectElement = document.getElementById('ssid');
                selectElement.innerHTML = '';
                data.ssidList.forEach((ssid) => {
                    const option = document.createElement('option');
                    option.value = ssid.name;
                    option.text = ssid.name;
                    selectElement.appendChild(option);
                });
            }) 
            .catch(error => {
                // å¤„ç†é”™è¯¯æƒ…å†µ
                alert("è·å–æ•°æ®è¶…æ—¶, è¯·ç»™æ—¶é’Ÿé‡æ–°ä¸Šç”µå†è¯•ï¼");
            });
         }

         // é¡µé¢åŠ è½½å®Œæˆåéšè—åŠ è½½é®ç½©å±‚
        window.onload = function() {
            console.log('onload');
            document.getElementById('loading-container').style.display = 'none';
        };
            
         getClockSetting();
     </script>
</body>
</html>